目录

**反走样/抗锯齿**

-   采样的原理
    -   反走在实际中的应用

**可见性/遮挡**

-   z-bufferring

## 采样的原理

采样是图形学中广泛存在的

光栅化 = 采样屏幕空间像素点

图像 = 采样图像感光元件平面

视频 = 采样时间

采样结果有瑕疵、不完美、各种问题成为sampling artifacts。比如：

-   锯齿
-   摩尔纹
-   车轮效应

本质的原因：信号（函数）改变过快（高频）但采样速度跟不上

反走样的方法：先模糊再采样Blurring（pre-Filtering） before Sampling

先采样再模糊不行

问题：

为什么采样不足会导致走样？

为什么先模糊再采样能反走样？

解答问题一：

频域

傅里叶变换，能够将函数转换成一系列正弦和余弦函数的总和（即任何函数可以分解成任何的频率）。

高频函数需要更快的采样

解答问题二：

傅里叶变换能将时域内容（图像）转换为频域内容。

图像内的边界会发生剧烈的信号变换，这就是高频信号。

傅里叶变换后得到信号函数，去掉高频信号，相当于抹去图像边界，这个操作就叫模糊。

高通滤波，保留边界

低通滤波，去除边界

## 过滤=卷积（=平均）

卷积的理解

信号值=其周围值的加权平均

时域的卷积操作 = 频域的乘积操作 （两种操作都可以做模糊）

卷积核，低通滤波器。box function = low pass filter

从频域的角度解析了采样原理和走样原因

采样 = 重复频谱，走样 = 频谱重叠或者混合

## 如何减少走样的错误？

1\. 提高分辨率，提高采样频率（但是受限于物理设备）

2\. 反走样方法

-   先模糊再采样
    -   MSAA
    -   FXAA（Fast Approximate AA）
    -   TAA（Temporal AA）

**先模糊再采样**

对像素值（颜色值）做卷积操作，然后再采样像素点。

**MSAA**

将一个像素分拆成N\*N区域，计算三角形占了多少区域，占比\*像数值=最终像素值，再采样像素点。

**FXAA**

通过图像识别技术找出锯齿像素，然后替换为抗锯齿的像素。

## 

## 可见性/遮挡

画家算法：先画深度大的物体，在画深度浅的物体。需要对物体进行深度排序，时间复杂度为nlog(n)。

但不支持物体相互遮挡的情况（遮挡成环）

## z-buffer算法

每个像素多出一个buffer存储深度值。

像素buffer：

-   frame buffer：存储color value
-   z-buffer：存储深度值

z值越小越近，越大越远

z-buffer算法：

其实就是比较图形点z值，zbuffer存储较小的z值，更是更新颜色。

时间复杂度为O(n)，不用排序三角形，与画三角形的顺序无关。
